{"openapi":"3.0.0","info":{"title":"BellPou API","version":"1.0.0"},"paths":{"/client":{"get":{"tags":["Client"],"responses":{"200":{"$ref":"#/components/responses/ClientsFound"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeManager"},"500":{"description":"Server error"}}},"post":{"tags":["Client"],"requestBody":{"$ref":"#/components/requestBodies/ClientToAdd"},"responses":{"201":{"$ref":"#/components/responses/ClientAdded"},"400":{"description":"first_name,last_name,birth_date,email,password are required"},"500":{"description":"Server error"}}},"patch":{"tags":["Client"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/ClientToUpdate"},"responses":{"204":{"$ref":"#/components/responses/ClientUpdated"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"500":{"description":"Server error"}}},"delete":{"tags":["Client"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/ClientToDelete"},"responses":{"200":{"$ref":"#/components/responses/ClientDeleted"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeManager"},"500":{"description":"Server error"}}}},"/personalReward":{"get":{"tags":["PersonalReward"],"responses":{"200":{"$ref":"#/components/responses/PersonalRewardsFound"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeManager"},"500":{"description":"Server error"}}},"post":{"tags":["PersonalReward"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/PersonalRewardToAdd"},"responses":{"201":{"$ref":"#/components/responses/PersonalRewardAdded"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"500":{"description":"Server error"}}},"delete":{"tags":["PersonalReward"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/PersonalRewardToDelete"},"responses":{"200":{"$ref":"#/components/responses/PersonalRewardDeleted"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"500":{"description":"Server error"}}}},"/ping":{"get":{"tags":["Ping"],"responses":{"200":{"description":"API reachable","content":{"text/plain":{"schema":{"type":"string","example":"pong"}}}}}}},"/reward/{id}":{"get":{"tags":["Reward"],"parameters":[{"name":"id","description":"ID of a reward","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"$ref":"#/components/responses/RewardFound"},"404":{"description":"Reward not found"},"500":{"description":"Server Error"}}}},"/reward":{"get":{"tags":["Reward"],"responses":{"200":{"$ref":"#/components/responses/RewardsFound"},"404":{"description":"client not found || reward not found || too poor"},"500":{"description":"Server error"}}},"post":{"tags":["Reward"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/RewardToAdd"},"responses":{"201":{"$ref":"#/components/responses/RewardAdded"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeManager"},"500":{"description":"Server error"}}},"delete":{"tags":["Reward"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/RewardToDelete"},"responses":{"200":{"$ref":"#/components/responses/RewardDeleted"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeManager"},"500":{"description":"Server error"}}}}},"components":{"responses":{"ClientsFound":{"description":"return un array of Clients","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Client"}}}}},"ClientAdded":{"description":"The client has been added"},"ClientUpdated":{"description":"The Client has been updtated"},"ClientDeleted":{"description":"The client has been deleted"},"PersonalRewardsFound":{"description":"return all the personal reward of the user session","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PersonalReward"}}}}},"PersonalRewardAdded":{"description":"The personalReward has been added"},"PersonalRewardDeleted":{"description":"The personalReward has been deleted"},"RewardFound":{"description":"return a Reward","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Reward"}}}},"RewardsFound":{"description":"return un array of Rewards","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Reward"}}}}},"RewardAdded":{"description":"The Reward has been added"},"mustBeManager":{"description":"The requested action can only be performed by a manager"},"ErrorJWT":{"description":"The JWT is not valid"},"MissingJWT":{"description":"No JWT"}},"requestBodies":{"ClientToAdd":{"content":{"application/json":{"schema":{"type":"object","properties":{"first_name":{"type":"string"},"last_name":{"type":"string"},"birth_date":{"type":"string","format":"date"},"nb_throins":{"type":"integer"},"email":{"type":"string","format":"email"},"password":{"type":"string","format":"password"}}}}}},"ClientToUpdate":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Client"}}}},"ClientToDelete":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"integer"}}}}}},"PersonalRewardToAdd":{"content":{"application/json":{"schema":{"type":"object","properties":{"reward_id":{"type":"integer"}}}}}},"PersonalRewardToDelete":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"integer"}}}}}},"RewardToAdd":{"content":{"application/json":{"schema":{"type":"object","properties":{"name_fr":{"type":"string"},"name_en":{"type":"string"},"description_fr":{"type":"string"},"description_en":{"type":"string"},"throins_cost":{"type":"integer"},"real_cost":{"type":"number","format":"float"},"vendor":{"type":"object","$ref":"#/components/schemas/Vendor"}}}}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"Client":{"type":"object","properties":{"id":{"type":"integer"},"first_name":{"type":"string"},"last_name":{"type":"string"},"birth_date":{"type":"string","format":"date"},"nb_throins":{"type":"integer"},"email":{"type":"string","format":"email"},"password":{"type":"string","format":"password"},"nb_bad_report":{"type":"integer","minimum":0},"is_banned":{"type":"boolean"}},"required":["first_name","last_name","birth_date","nb_throins","email","password","nb_bad_report","is_banned"]},"Manager":{"type":"object","properties":{"id":{"type":"integer"},"first_name":{"type":"string"},"last_name":{"type":"string"},"birth_date":{"type":"string","format":"date"},"nb_throins":{"type":"integer"},"email":{"type":"string","format":"email"},"password":{"type":"string","format":"password"}},"required":["first_name","last_name","birth_date","nb_throins","email","password"]},"PersonalReward":{"type":"object","properties":{"id":{"type":"integer"},"discount_code":{"type":"string"},"exp_date":{"type":"string","format":"date"},"is_used":{"type":"boolean"},"client_id":{"type":"integer"},"reward_id":{"type":"integer"}},"required":["discount_code","exp_date","is_used","client_id","reward_id"]},"Position":{"type":"object","properties":{"id":{"type":"integer"},"coordinate_x":{"type":"integer","format":"float"},"coordinate_y":{"type":"string","format":"float"}},"required":["coordinate_x","coordinate_y"]},"Report":{"type":"object","properties":{"trash_id":{"type":"integer"},"client_id":{"type":"integer"}},"required":["client_id","trash_id"]},"Reward":{"type":"object","properties":{"id":{"type":"integer"},"name_fr":{"type":"string"},"name_en":{"type":"string"},"description_fr":{"type":"string"},"description_en":{"type":"string"},"throins_cost":{"type":"integer"},"real_cost":{"type":"number","format":"float"},"vendor_id":{"type":"integer"}},"required":["name_fr","name_en","description_fr","description_en","throins_cost","real_cost","vendor_id"]},"Trash":{"type":"object","properties":{"id":{"type":"integer"},"is_full":{"type":"boolean"},"nb_alerts":{"type":"integer"},"last_empty":{"type":"string","format":"date"},"qr_code":{"type":"string"},"position_id":{"type":"integer","$ref":"#/components/schemas/Position"}},"required":["is_full","nb_alerts","last_empty","qr_code","position_id"]},"Vendor":{"type":"object","properties":{"id":{"type":"integer"},"name_fr":{"type":"string"},"name_en":{"type":"string"},"description_fr":{"type":"string"},"description_en":{"type":"string"},"throins_cost":{"type":"integer"},"real_cost":{"type":"number","format":"float"},"position_id":{"type":"integer","$ref":"#/components/schemas/Position"}},"required":["name_fr","name_en","description_fr","description_en","position_id"]}}},"tags":[]}